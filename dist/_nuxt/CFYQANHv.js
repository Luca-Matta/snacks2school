import{d as fe,r,o as me,L as Me,v as s,i as ne,M as de,t,x as e,B as p,y as d,N as n,O as K,P as R,Q as E,u as Ve,z as W,g as Le,R as Ae,A as ce,a as Ue,D as Be,H as Oe,I as Te,J as Pe,K as Fe}from"./Lh55aVSo.js";import{_ as Ne,a as Ke}from"./UehtUs6s.js";import{g as ge,a as Se,c as je,_ as qe}from"./CW2Tqlor.js";import{a as z}from"./upsvKRUO.js";import{a as xe}from"./C_D2JwHD.js";import{_ as He}from"./C8rlYY4j.js";import{_ as Xe}from"./RgGFD2VX.js";import"./inWKtfgP.js";const Ge=Symbol.for("nuxt:client-only"),We=fe({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(ae,{slots:B,attrs:x}){const V=r(!1);return me(()=>{V.value=!0}),Me(Ge,!0),h=>{var g;if(V.value)return(g=B.default)==null?void 0:g.call(B);const A=B.fallback||B.placeholder;if(A)return A();const P=h.fallback||h.placeholder||"",D=h.fallbackTag||h.placeholderTag||"span";return s(D,x,P)}}}),De=""+new URL("credit-card.C-b7V5XM.png",import.meta.url).href,he=""+new URL("no-money.D1zKwrNN.png",import.meta.url).href,Ze={key:0,class:"fixed inset-0 flex justify-center items-center z-30 !px-4 md:px-0",style:{"backdrop-filter":"blur(50px)"}},Je={ref:"modalContainer",class:"bg-white p-8 !rounded-3xl outline outline-4 outline-white outline-offset-4 shadow-card w-full max-w-96 max-h-[500px] overflow-y-auto"},Qe={class:"text-lg text-center font-bold"},Ye={class:"lowercase"},et={key:0,class:"flex justify-center items-center text-center !py-4 text-xs gap-2 font-bold"},tt={key:1,class:"flex flex-col justify-center items-center !py-4 text-sm text-center gap-4"},st={key:2},ot={class:"relative mb-4"},lt={class:"text-xs font-bold opacity-80"},nt={key:0,class:"absolute mt-1 w-full !rounded-md bg-white shadow-card z-10"},at={class:"max-h-60 overflow-auto"},rt={key:0,class:"text-center text-xs font-bold mb-2"},it={key:1,class:"relative mb-4"},ct={class:"text-xs font-bold opacity-80"},dt={key:0,class:"absolute mt-1 w-full !rounded-md bg-white shadow-card z-10"},ut={class:"max-h-60 overflow-auto"},pt=["onClick"],ft={key:2,class:"text-center text-xs font-bold mb-2"},mt={key:3,class:"relative mb-4"},vt={class:"text-xs font-bold opacity-80"},xt={key:0,class:"absolute mt-1 w-full !rounded-md bg-white shadow-card z-10"},ht={class:"max-h-60 overflow-auto"},gt=["onClick"],wt={key:4,class:"mb-1 relative"},bt={class:"text-xs font-bold opacity-80"},yt={key:0,class:"absolute mt-1 w-full !rounded-md bg-white shadow-card z-10"},_t={class:"max-h-60 overflow-auto"},kt=["onClick"],Ct={key:5,class:"mb-1 mt-4 relative"},$t={class:"flex items-center gap-2"},St=["src"],jt={class:"text-xs font-bold opacity-80"},Dt={class:"flex items-center gap-2"},Ot={key:0,class:"text-xs opacity-80 mr-2"},Tt={key:0,class:"absolute mt-1 w-full !rounded-md bg-white shadow-card z-20"},zt={class:"max-h-60 overflow-auto"},Rt=["onClick"],Et={class:"flex justify-center items-center flex-shrink-0"},It=["src"],Lt={class:"text-xs font-bold flex-1 ml-1"},Mt={class:"text-xs flex-shrink-0"},Vt={key:6,class:"text-sm text-center font-bold mt-3"},At={key:7,class:"mb-1 mt-4 relative"},Ut={class:"flex items-center gap-2"},Bt=["src"],Pt={class:"text-xs font-bold opacity-80"},Ft={class:"flex items-center gap-2"},Nt={key:0,class:"text-xs opacity-80 mr-2"},Kt={key:0,class:"absolute mt-1 w-full !rounded-md bg-white shadow-card z-20"},qt={class:"max-h-44 overflow-auto"},Ht=["onClick"],Xt={class:"flex justify-center items-center flex-shrink-0"},Gt=["src"],Wt={class:"text-xs font-bold flex-1 ml-1"},Zt={class:"text-xs flex-shrink-0"},Jt={key:8,class:"text-xs text-center mt-3"},Qt={key:3,class:"text-center text-xs opacity-80 underline mt-2"},Yt={key:4,class:"flex justify-center gap-2"},es={key:5,class:"flex flex-col justify-center items-center pb-4 text-sm text-center gap-4"},ts=fe({__name:"InitializeOrder",props:{isInitializeOrderVisible:{type:Boolean},selectedDay:{},selectedDate:{}},emits:["close","openInitializeOrder"],setup(ae,{emit:B}){const x=ae,V=B,h=ne(()=>{const c=new Date,a=new Date(x.selectedDate);return a.setDate(a.getDate()-1),a.setHours(13,30,0,0),c<a});de(()=>x.selectedDate,c=>{console.log("Selected date:",c),h.value||console.log("Cannot modify order after 13:30 the day before the delivery date.")});const A=r([]),P=r([]),D=r([]),g=r(null),C=r(!1),_=r(!1),O=r(!1),T=r(!1),k=r(!1),l=r("Merenda"),I=r(!1),m=r([]),w=r(null);function F(){k.value=!k.value}function te(c){l.value=c,k.value=!1}const le=()=>{T.value=!T.value},f=()=>{I.value=!I.value},$=c=>{oe.value=c.id,T.value=!1},q=c=>{if(!w.value)return"Scegli la scuola...";const a=w.value.associated_schools.find(G=>G.id===c);return a?a.name:""},J=async()=>{try{const c=await z.get("https://www.snacks2school.com/api/stores/");A.value=c.data}catch(c){console.error("Error fetching store data:",c)}},Q=async c=>{try{const a=await z.get(`https://www.snacks2school.com/api/snacks/?username=${c}`);P.value=a.data}catch(a){console.error("Error fetching snack data:",a)}},y=async c=>{try{const a=await z.get(`https://www.snacks2school.com/api/drinks/?username=${c}`);D.value=a.data}catch(a){console.error("Error fetching drink data:",a)}},se=()=>{C.value=!C.value},H=c=>{g.value=c,C.value=!1,Q(c.username),y(c.username)},X=()=>{_.value=!_.value},re=()=>{O.value=!O.value},S=r(null),L=r(null),we=c=>{S.value=c,_.value=!1,O.value=!1},be=c=>{L.value=c,O.value=!1,_.value=!1},ye=c=>{w.value=c,I.value=!1,c.associated_schools.length>0?oe.value=c.associated_schools[0].id:oe.value=null},ve=ne(()=>{let c=0;return S.value&&(c+=parseFloat(S.value.gross_price)),L.value&&(c+=parseFloat(L.value.gross_price)),c}),_e=async()=>(await z.get("https://www.snacks2school.com/api/csrf-token/",{withCredentials:!0})).data.csrfToken,b=r(null),M=r([]),oe=r(null),ke=async()=>{if(!g.value||!S.value&&!L.value){console.error("Store, Snack, and Drink must be selected");return}const c=await _e();try{if(!localStorage.getItem("authToken")){console.error("No authentication token found.");return}const G={seller_id:g.value.id,selected_date:x.selectedDate,total_price:ve.value.toFixed(2),school:oe.value,is_snack_break:l.value==="Merenda",is_lunch_break:l.value==="Pranzo",child_first_name:w.value.first_name,child_last_name:w.value.last_name,school_class:w.value.school_class};S.value&&(G.snack_id=S.value.id),L.value&&(G.drink_id=L.value.id),console.log("Payload:",G);const v=await z.post("https://www.snacks2school.com/api/create-order/",G,{headers:{"X-CSRFToken":c,Authorization:`Token ${localStorage.getItem("authToken")}`},withCredentials:!0});console.log("Order placed successfully:",v.data)}catch(a){console.error("Error placing order:",a)}finally{V("close"),window.location.reload()}},N=ne(()=>b.value&&b.value.credit_wallet_amount>0),ue=ne(()=>(S.value?parseFloat(S.value.gross_price):0)+(L.value?parseFloat(L.value.gross_price):0)<=b.value.credit_wallet_amount),Y=r(null),Ce=async()=>(await z.get("https://www.snacks2school.com/api/v1/stripe/stripe-pub-key/")).data.publicKey,ee=async()=>{try{const c=await xe.get("csrf-token/"),a=await xe.post("v1/stripe/create-checkout-session/",{},{headers:{"X-CSRFToken":c.data.csrfToken},withCredentials:!0});return Y.value.redirectToCheckout({sessionId:a.data.sessionId})}catch(c){console.error("Error creating checkout session:",c)}};return me(async()=>{J(),b.value=await ge(),b.value&&(M.value=b.value.associated_schools,m.value=await Se(),m.value.length>0&&(w.value=m.value[0],w.value.associated_schools.length>0&&(oe.value=w.value.associated_schools[0].id)));const c=await Ce();Y.value=Stripe(c)}),(c,a)=>{var G;return c.isInitializeOrderVisible?(t(),s("div",Ze,[e("div",Je,[e("h2",Qe,[a[4]||(a[4]=p(" Ordina lo snack del ")),e("span",Ye,d(c.selectedDay),1)]),N.value?(t(),s("div",et,[a[5]||(a[5]=e("img",{src:De,alt:"Card",class:"h-6 w-6 cursor-pointer"},null,-1)),e("div",null," Hai "+d(b.value.credit_wallet_amount)+"€ sul tuo portafoglio di credito ",1)])):n("",!0),N.value?n("",!0):(t(),s("div",tt,[a[6]||(a[6]=e("div",{class:"flex justify-center items-center text-center !py-4 text-xs gap-2 font-bold"},[e("img",{src:he,alt:"Card",class:"h-9 w-9 cursor-pointer"}),e("div",null,"Il tuo portafoglio di credito è vuoto")],-1)),e("div",null,[e("button",{onClick:ee,class:"flex justify-center mx-auto btn bg-[#ffa500] uppercase text-black text-xs shadow-button !py-3 !px-6 !rounded-lg"}," Ricaricalo e ordina la tua merenda! ")])])),h.value&&N.value?(t(),s("div",st,[a[14]||(a[14]=e("div",{class:"text-center text-xs font-bold mb-2"}," L'ordine è per merenda o per pranzo? ",-1)),e("div",ot,[e("div",{onClick:F,class:"mt-1 flex justify-between w-full !px-3 !py-2 border-2 border-[#ffa500] focus:border-[#ffa500] !rounded-md cursor-pointer bg-white"},[e("span",lt,d(l.value),1),(t(),s("svg",{class:K([{"rotate-180":k.value,"transition-transform":!0},"w-5 h-5 text-gray-700"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a[7]||(a[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),k.value?(t(),s("div",nt,[e("ul",at,[e("li",{onClick:a[0]||(a[0]=v=>te("Merenda")),class:"cursor-pointer !px-4 !py-2 hover:bg-[#f5f5f5] text-sm font-bold"}," Merenda "),e("li",{onClick:a[1]||(a[1]=v=>te("Pranzo")),class:"cursor-pointer !px-4 !py-2 hover:bg-[#f5f5f5] text-sm font-bold"}," Pranzo ")])])):n("",!0)]),m.value.length>1?(t(),s("div",rt," Per chi desideri ordinare? ")):n("",!0),m.value.length>1?(t(),s("div",it,[e("div",{onClick:f,class:"mt-1 flex justify-between w-full !px-3 !py-2 border-2 border-[#ffa500] focus:border-[#ffa500] !rounded-md cursor-pointer bg-white"},[e("span",ct,d(w.value?`${w.value.first_name} ${w.value.last_name}`:"Seleziona..."),1),(t(),s("svg",{class:K([{"rotate-180":I.value,"transition-transform":!0},"w-5 h-5 text-gray-700"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a[8]||(a[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),I.value?(t(),s("div",dt,[e("ul",ut,[(t(!0),s(R,null,E(m.value,(v,Z)=>(t(),s("li",{key:Z,onClick:ie=>ye(v),class:"cursor-pointer !px-4 !py-2 hover:bg-[#f5f5f5] text-sm font-bold"},d(v.first_name)+" "+d(v.last_name),9,pt))),128))])])):n("",!0)])):n("",!0),w.value&&w.value.associated_schools.length>1?(t(),s("div",ft," In quale scuola vuoi ricevere l'ordine? ")):n("",!0),w.value&&w.value.associated_schools.length>1?(t(),s("div",mt,[e("div",{onClick:le,class:"mt-1 flex justify-between w-full !px-3 !py-2 border-2 border-[#ffa500] focus:border-[#ffa500] !rounded-md cursor-pointer bg-white"},[e("span",vt,d(oe.value?q(oe.value):"Scegli la scuola..."),1),(t(),s("svg",{class:K([{"rotate-180":T.value,"transition-transform":!0},"w-5 h-5 text-gray-700"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a[9]||(a[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),T.value?(t(),s("div",xt,[e("ul",ht,[(t(!0),s(R,null,E((G=w.value)==null?void 0:G.associated_schools,(v,Z)=>(t(),s("li",{key:Z,onClick:ie=>$(v),class:"cursor-pointer !px-4 !py-2 hover:bg-[#f5f5f5] text-sm font-bold"},d(v.name),9,gt))),128))])])):n("",!0)])):n("",!0),N.value?(t(),s("div",wt,[e("div",{onClick:se,class:"mt-1 flex justify-between w-full !px-3 !py-2 border-2 border-[#ffa500] focus:border-[#ffa500] !rounded-md cursor-pointer bg-white"},[e("span",bt,d(g.value?g.value.first_name+" "+g.value.last_name:"Scegli lo store..."),1),(t(),s("svg",{class:K([{"rotate-180":C.value,"transition-transform":!0},"w-5 h-5 text-gray-700"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a[10]||(a[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),C.value?(t(),s("div",yt,[e("ul",_t,[(t(!0),s(R,null,E(A.value,(v,Z)=>(t(),s("li",{key:Z,onClick:ie=>H(v),class:"cursor-pointer !px-4 !py-2 hover:bg-[#f5f5f5] text-sm font-bold"},d(v.first_name)+" "+d(v.last_name),9,kt))),128))])])):n("",!0)])):n("",!0),N.value&&P.value.length?(t(),s("div",Ct,[e("div",{onClick:X,class:"mt-1 flex justify-between items-center w-full !px-3 !py-2 border-2 border-[#ffa500] focus:border-[#ffa500] !rounded-md cursor-pointer bg-white gap-2"},[e("div",$t,[S.value?(t(),s("img",{key:0,src:S.value.image,alt:"snack",class:"bg-center bg-contain bg-no-repeat h-7 w-7"},null,8,St)):n("",!0),e("span",jt,d(S.value?S.value.name:"Snacks disponibili..."),1)]),e("div",Dt,[S.value?(t(),s("span",Ot,"€"+d(S.value.gross_price),1)):n("",!0),(t(),s("svg",{class:K([{"rotate-180":_.value,"transition-transform":!0},"w-5 h-5 text-gray-700"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a[11]||(a[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])]),_.value?(t(),s("div",Tt,[e("ul",zt,[(t(!0),s(R,null,E(P.value,(v,Z)=>(t(),s("li",{key:Z,onClick:ie=>we(v),class:"flex justify-between items-center cursor-pointer !px-4 !py-2 hover:bg-[#f5f5f5] gap-2"},[e("div",Et,[e("img",{src:v.image,alt:"snack",class:"bg-center bg-contain bg-no-repeat !h-7 !w-7"},null,8,It)]),e("div",Lt,d(v.name),1),e("div",Mt," €"+d(v.gross_price),1)],8,Rt))),128))])])):n("",!0)])):n("",!0),N.value&&D.value.length?(t(),s("h6",Vt," Vuoi ordinare una bevanda? ")):n("",!0),N.value&&D.value.length?(t(),s("div",At,[e("div",{onClick:re,class:"mt-1 flex justify-between items-center w-full !px-3 !py-2 border-2 border-[#ffa500] focus:border-[#ffa500] !rounded-md cursor-pointer bg-white gap-2"},[e("div",Ut,[L.value?(t(),s("img",{key:0,src:L.value.image,alt:"drink",class:"bg-center bg-contain bg-no-repeat h-7 w-7"},null,8,Bt)):n("",!0),e("span",Pt,d(L.value?L.value.name:"Bevande disponibili..."),1)]),e("div",Ft,[L.value?(t(),s("span",Nt,"€"+d(L.value.gross_price),1)):n("",!0),(t(),s("svg",{class:K([{"rotate-180":O.value,"transition-transform":!0},"w-5 h-5 text-gray-700"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a[12]||(a[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])]),O.value?(t(),s("div",Kt,[e("ul",qt,[(t(!0),s(R,null,E(D.value,(v,Z)=>(t(),s("li",{key:Z,onClick:ie=>be(v),class:"flex justify-between items-center cursor-pointer !px-4 !py-2 hover:bg-[#f5f5f5] gap-2"},[e("div",Xt,[e("img",{src:v.image,alt:"drink",class:"bg-center bg-contain bg-no-repeat !h-7 !w-7"},null,8,Gt)]),e("div",Wt,d(v.name),1),e("div",Zt," €"+d(v.gross_price),1)],8,Ht))),128))])])):n("",!0)])):n("",!0),S.value||L.value?(t(),s("h6",Jt,[a[13]||(a[13]=e("span",{class:"text-sm font-bold"},"Totale:",-1)),p(" €"+d(ve.value.toFixed(2)),1)])):n("",!0)])):n("",!0),N.value?(t(),s("div",Qt," L'ordine può essere effettuato e modificato fino alle 13:30 del giorno precedente alla data di consegna. ")):n("",!0),N.value&&ue.value&&h.value?(t(),s("div",Yt,[e("button",{onClick:a[2]||(a[2]=v=>c.$emit("close")),class:"btn bg-black w-full font-bold text-white uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Annulla "),e("button",{onClick:ke,class:"btn bg-[#ffa500] w-full font-bold uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Ordina ")])):n("",!0),!ue.value&&N.value?(t(),s("div",es,[a[15]||(a[15]=e("div",{class:"flex flex-col justify-center items-center text-center !py-4 text-xs font-bold"},[e("img",{src:he,alt:"Card",class:"h-9 w-9 cursor-pointer"}),e("div",{class:"font-bold underline"}," Non hai abbastanza denaro sul portafoglio di credito per effettuare l'acquisto ")],-1)),e("div",null,[e("button",{onClick:ee,class:"flex justify-center mx-auto btn bg-[#ffa500] uppercase text-black text-xs shadow-button !py-3 !px-6 !rounded-lg"}," Ricaricalo e ordina la tua merenda! ")])])):n("",!0),h.value?n("",!0):(t(),s("button",{key:6,onClick:a[3]||(a[3]=v=>c.$emit("close")),class:"btn bg-[#ffa500] w-full font-bold text-black uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Chiudi "))],512)])):n("",!0)}}}),ze=""+new URL("close.jzhALJ-C.png",import.meta.url).href,ss={key:0,class:"fixed inset-0 flex justify-center items-center z-30 !px-4 md:px-0",style:{"backdrop-filter":"blur(50px)"}},os={ref:"modalContainer",class:"bg-white p-8 rounded-3xl outline outline-4 outline-white outline-offset-4 shadow-card w-full max-w-96 max-h-[500px] overflow-y-auto"},ls={class:"text-lg text-center font-bold"},ns={class:"lowercase"},as={key:0,class:"text-center text-xs opacity-80 mt-1"},rs={class:"flex flex-col justify-center py-4 gap-2"},is={class:"flex flex-col gap-1"},cs={class:"flex items-center gap-1"},ds=["src","alt"],us=["onClick"],ps={class:"flex flex-col gap-1"},fs={class:"flex items-center gap-1"},ms=["src","alt"],vs=["onClick"],xs={key:1},hs={key:0,class:"flex justify-center items-center text-center py-4 text-xs gap-2 font-bold"},gs={key:1,class:"flex flex-col justify-center items-center py-4 text-sm text-center gap-4"},ws={key:2,class:"mb-1 relative"},bs={class:"relative mb-4"},ys={class:"text-xs font-bold opacity-80"},_s={key:0,class:"absolute mt-1 w-full rounded-md bg-white shadow-card z-10"},ks={class:"max-h-60 overflow-auto"},Cs={key:0,class:"text-center text-xs font-bold mb-2"},$s={key:1,class:"relative mb-4"},Ss={class:"text-xs font-bold opacity-80"},js={key:0,class:"absolute mt-1 w-full rounded-md bg-white shadow-card z-10"},Ds={class:"max-h-60 overflow-auto"},Os=["onClick"],Ts={key:2,class:"text-center text-xs font-bold mb-2"},zs={key:3,class:"relative mb-4"},Rs={class:"text-xs font-bold opacity-80"},Es={key:0,class:"absolute mt-1 w-full rounded-md bg-white shadow-card z-10"},Is={class:"max-h-60 overflow-auto"},Ls=["onClick"],Ms={class:"text-xs font-bold opacity-80"},Vs={key:5,class:"absolute mt-1 w-full rounded-md bg-white shadow-card z-10"},As={class:"max-h-60 overflow-auto"},Us=["onClick"],Bs={key:3,class:"mb-1 mt-4 relative"},Ps={class:"flex items-center gap-2"},Fs=["src"],Ns={class:"text-xs font-bold opacity-80"},Ks={class:"flex items-center gap-2"},qs={key:0,class:"text-xs opacity-80 mr-2"},Hs={key:0,class:"absolute mt-1 w-full rounded-md bg-white shadow-card z-20"},Xs={class:"max-h-60 overflow-auto"},Gs=["onClick"],Ws={class:"flex justify-center items-center flex-shrink-0"},Zs=["src"],Js={class:"text-xs font-bold flex-1 ml-1"},Qs={class:"text-xs flex-shrink-0"},Ys={key:4,class:"text-sm text-center font-bold mt-3"},eo={key:5,class:"mb-1 mt-4 relative"},to={class:"flex items-center gap-2"},so=["src"],oo={class:"text-xs font-bold opacity-80"},lo={class:"flex items-center gap-2"},no={key:0,class:"text-xs opacity-80 mr-2"},ao={key:0,class:"absolute mt-1 w-full rounded-md bg-white shadow-card z-20"},ro={class:"max-h-44 overflow-auto"},io=["onClick"],co={class:"flex justify-center items-center flex-shrink-0"},uo=["src"],po={class:"text-xs font-bold flex-1 ml-1"},fo={class:"text-xs flex-shrink-0"},mo={key:6,class:"text-xs text-center mt-3"},vo={key:2,class:"text-center text-xs opacity-80 underline mt-2"},xo={key:3,class:"flex justify-center gap-2"},ho={key:4,class:"flex flex-col justify-center items-center pb-4 text-sm text-center gap-4"},go=fe({__name:"EditOrder",props:{isEditOrderVisible:{type:Boolean},selectedDay:{},selectedDate:{}},emits:["close","openEditOrder"],setup(ae,{emit:B}){const x=ae;de(()=>x.selectedDate,i=>{console.log("Selected date:",i)});const V=B,h=r([]),A=r([]),P=r([]),D=r(null),g=r(!1),C=r(!1),_=r(!1),O=r(!1),T=r(!1),k=r("Merenda"),l=r(!1),I=r([]),m=r(null);function w(){T.value=!T.value}function F(i){k.value=i,T.value=!1}const te=()=>{l.value=!l.value},le=()=>{O.value=!O.value},f=i=>{ee.value=i.id,O.value=!1},$=i=>{if(!m.value)return"Scegli la scuola...";const o=m.value.associated_schools.find(j=>j.id===i);return o?o.name:""},q=i=>{m.value=i,l.value=!1,i.associated_schools.length>0?ee.value=i.associated_schools[0].id:ee.value=null},J=r(null),Q=r(""),y=r(""),se=i=>{const o=new Date(i),j=o.getFullYear(),u=String(o.getMonth()+1).padStart(2,"0"),U=String(o.getDate()).padStart(2,"0");return`${j}-${u}-${U}`},H=async i=>{try{const o=await ue(),j=await z.get("https://www.snacks2school.com/api/orders-by-day/",{params:{selected_day:i},headers:{"X-CSRFToken":o,Authorization:`Token ${localStorage.getItem("authToken")}`},withCredentials:!0});J.value=j.data,Q.value=J.value.snacks,y.value=J.value.drinks}catch(o){console.error("Error fetching day data:",o)}},X=ne(()=>{const i=new Date,o=new Date(x.selectedDate);return o.setDate(o.getDate()-1),o.setHours(13,30,0,0),i<o});de(()=>x.selectedDate,i=>{console.log("Selected date:",i),X.value||console.log("Cannot modify order after 13:30 the day before the delivery date.")});const re=async(i,o,j)=>{try{const u=x.selectedDate,U=se(u);if(!U)throw new Error("Invalid date format");const pe=await ue(),hl=await z.delete(`https://www.snacks2school.com/api/delete-order-item/${i}/${o}/${j}/?selected_date=${U}`,{headers:{"X-CSRFToken":pe,Authorization:`Token ${localStorage.getItem("authToken")}`},withCredentials:!0});o==="drink"?y.value=y.value.filter($e=>$e.id!==j):o==="snack"&&(Q.value=Q.value.filter($e=>$e.id!==j)),window.location.reload()}catch(u){console.error("Error deleting item:",u)}};de([()=>x.isEditOrderVisible,()=>x.selectedDate],async([i,o])=>{if(i&&o){J.value=null;const j=se(o);await H(j)}else J.value=null},{immediate:!0});const S=async()=>{try{const i=await z.get("https://www.snacks2school.com/api/stores/");h.value=i.data}catch(i){console.error("Error fetching store data:",i)}},L=async i=>{try{const o=await z.get(`https://www.snacks2school.com/api/snacks/?username=${i}`);A.value=o.data}catch(o){console.error("Error fetching snack data:",o)}},we=async i=>{try{const o=await z.get(`https://www.snacks2school.com/api/drinks/?username=${i}`);P.value=o.data}catch(o){console.error("Error fetching drink data:",o)}},be=()=>{g.value=!g.value},ye=i=>{D.value=i,g.value=!1,L(i.username),we(i.username)},ve=()=>{C.value=!C.value},_e=()=>{_.value=!_.value},b=r(null),M=r(null),oe=i=>{b.value=i,C.value=!1,_.value=!1},ke=i=>{M.value=i,_.value=!1,C.value=!1},N=ne(()=>{let i=0;return b.value&&(i+=parseFloat(b.value.gross_price)),M.value&&(i+=parseFloat(M.value.gross_price)),i}),ue=async()=>(await z.get("https://www.snacks2school.com/api/csrf-token/",{withCredentials:!0})).data.csrfToken,Y=r(null),Ce=r([]),ee=r(null),c=async()=>{if(!D.value||!b.value&&!M.value){console.error("Store, Snack, and Drink must be selected");return}const i=await ue();try{if(!localStorage.getItem("authToken")){console.error("No authentication token found.");return}const j={seller_id:D.value.id,selected_date:x.selectedDate,total_price:N.value.toFixed(2),school:ee.value,is_snack_break:k.value==="Merenda",is_lunch_break:k.value==="Pranzo",child_first_name:m.value.first_name,child_last_name:m.value.last_name,school_class:m.value.school_class};b.value&&(j.snack_id=b.value.id),M.value&&(j.drink_id=M.value.id),console.log("Payload:",j);const u=await z.post("https://www.snacks2school.com/api/create-order/",j,{headers:{"X-CSRFToken":i,Authorization:`Token ${localStorage.getItem("authToken")}`},withCredentials:!0});console.log("Order placed successfully:",u.data)}catch(o){console.error("Error placing order:",o)}finally{V("close"),window.location.reload()}},a=ne(()=>Y.value&&Y.value.credit_wallet_amount>0),G=ne(()=>(b.value?parseFloat(b.value.gross_price):0)+(M.value?parseFloat(M.value.gross_price):0)<=Y.value.credit_wallet_amount),v=r(null),Z=async()=>(await z.get("https://www.snacks2school.com/api/v1/stripe/stripe-pub-key/")).data.publicKey,ie=async()=>{try{const i=await xe.get("csrf-token/"),o=await xe.post("v1/stripe/create-checkout-session/",{},{headers:{"X-CSRFToken":i.data.csrfToken},withCredentials:!0});return v.value.redirectToCheckout({sessionId:o.data.sessionId})}catch(i){console.error("Error creating checkout session:",i)}};return me(async()=>{S(),Y.value=await ge(),I.value=await Se(),Y.value&&(Ce.value=Y.value.associated_schools,I.value.length>0&&(m.value=I.value[0],m.value.associated_schools.length>0&&(ee.value=m.value.associated_schools[0].id)));const i=await Z();v.value=Stripe(i)}),(i,o)=>{var j;return i.isEditOrderVisible?(t(),s("div",ss,[e("div",os,[e("h2",ls,[o[4]||(o[4]=p(" Modifica l'ordine del ")),e("span",ns,d(i.selectedDay),1)]),X.value?(t(),s("div",as," Vuoi rimuovere uno snack o una bevanda dall'ordine? Non siamo avidi, ti restituiamo fino all'ultimo centesimo! ")):n("",!0),e("div",rs,[e("div",is,[(t(!0),s(R,null,E(Q.value,u=>(t(),s("div",{key:u.name,class:"flex justify-between items-center text-xs font-bold gap-1"},[e("div",cs,[e("img",{src:u.image,alt:u.name,class:"h-7 w-7"},null,8,ds),e("div",null,d(u.name),1)]),X.value?(t(),s("img",{key:0,src:ze,alt:"Close",class:"h-4 w-4 cursor-pointer",onClick:U=>re(u.order_id,"snack",u.id)},null,8,us)):n("",!0)]))),128))]),e("div",ps,[(t(!0),s(R,null,E(y.value,u=>(t(),s("div",{key:u.name,class:"flex justify-between items-center text-xs font-bold gap-1"},[e("div",fs,[e("img",{src:u.image,alt:u.name,class:"h-7 w-7"},null,8,ms),e("div",null,d(u.name),1)]),X.value?(t(),s("img",{key:0,src:ze,alt:"Close",class:"h-4 w-4 cursor-pointer",onClick:U=>re(u.order_id,"drink",u.id)},null,8,vs)):n("",!0)]))),128))])]),X.value?(t(),s("div",xs,[o[15]||(o[15]=e("div",{class:"flex justify-center items-center text-center font-bold mt-2 gap-2"},[e("div",null,"Vuoi ordinare altro?")],-1)),a.value?(t(),s("div",hs,[o[5]||(o[5]=e("img",{src:De,alt:"Card",class:"h-6 w-6 cursor-pointer"},null,-1)),e("div",null," Hai "+d(Y.value.credit_wallet_amount)+"€ sul tuo portafoglio di credito ",1)])):n("",!0),a.value?n("",!0):(t(),s("div",gs,[o[6]||(o[6]=e("div",{class:"flex justify-center items-center text-center py-4 text-xs gap-2 font-bold"},[e("img",{src:he,alt:"Card",class:"h-9 w-9 cursor-pointer"}),e("div",null,"Il tuo portafoglio di credito è vuoto")],-1)),e("div",null,[e("button",{onClick:ie,class:"flex justify-center mx-auto btn bg-yellow uppercase text-black text-xs shadow-button py-3 px-6 rounded-lg"}," Ricaricalo e ordina la tua merenda! ")])])),a.value?(t(),s("div",ws,[o[11]||(o[11]=e("div",{class:"text-center text-xs font-bold mb-2"}," L'ordine è per merenda o per pranzo? ",-1)),e("div",bs,[e("div",{onClick:w,class:"mt-1 flex justify-between w-full px-3 py-2 border-2 border-yellow focus:border-yellow rounded-md cursor-pointer bg-white"},[e("span",ys,d(k.value),1),(t(),s("svg",{class:K([{"rotate-180":T.value,"transition-transform":!0},"w-5 h-5 text-gray-700"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o[7]||(o[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),T.value?(t(),s("div",_s,[e("ul",ks,[e("li",{onClick:o[0]||(o[0]=u=>F("Merenda")),class:"cursor-pointer px-4 py-2 hover:bg-gray-200 text-sm font-bold"}," Merenda "),e("li",{onClick:o[1]||(o[1]=u=>F("Pranzo")),class:"cursor-pointer px-4 py-2 hover:bg-gray-200 text-sm font-bold"}," Pranzo ")])])):n("",!0)]),I.value.length>1?(t(),s("div",Cs," Per chi desideri ordinare? ")):n("",!0),I.value.length>1?(t(),s("div",$s,[e("div",{onClick:te,class:"mt-1 flex justify-between w-full px-3 py-2 border-2 border-yellow focus:border-yellow rounded-md cursor-pointer bg-white"},[e("span",Ss,d(m.value?`${m.value.first_name} ${m.value.last_name}`:"Seleziona..."),1),(t(),s("svg",{class:K([{"rotate-180":l.value,"transition-transform":!0},"w-5 h-5 text-gray-700"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o[8]||(o[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),l.value?(t(),s("div",js,[e("ul",Ds,[(t(!0),s(R,null,E(I.value,(u,U)=>(t(),s("li",{key:U,onClick:pe=>q(u),class:"cursor-pointer px-4 py-2 hover:bg-gray-200 text-sm font-bold"},d(u.first_name)+" "+d(u.last_name),9,Os))),128))])])):n("",!0)])):n("",!0),m.value&&m.value.associated_schools.length>1?(t(),s("div",Ts," In quale scuola vuoi ricevere l'ordine? ")):n("",!0),m.value&&m.value.associated_schools.length>1?(t(),s("div",zs,[e("div",{onClick:le,class:"mt-1 flex justify-between w-full px-3 py-2 border-2 border-yellow focus:border-yellow rounded-md cursor-pointer bg-white"},[e("span",Rs,d(ee.value?$(ee.value):"Scegli la scuola..."),1),(t(),s("svg",{class:K([{"rotate-180":O.value,"transition-transform":!0},"w-5 h-5 text-gray-700"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o[9]||(o[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),O.value?(t(),s("div",Es,[e("ul",Is,[(t(!0),s(R,null,E((j=m.value)==null?void 0:j.associated_schools,(u,U)=>(t(),s("li",{key:U,onClick:pe=>f(u),class:"cursor-pointer px-4 py-2 hover:bg-gray-200 text-sm font-bold"},d(u.name),9,Ls))),128))])])):n("",!0)])):n("",!0),a.value?(t(),s("div",{key:4,onClick:be,class:"mt-1 flex justify-between w-full px-3 py-2 border-2 border-yellow focus:border-yellow rounded-md cursor-pointer bg-white"},[e("span",Ms,d(D.value?D.value.first_name+" "+D.value.last_name:"Scegli lo store..."),1),(t(),s("svg",{class:K([{"rotate-180":g.value,"transition-transform":!0},"w-5 h-5 text-gray-700"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o[10]||(o[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])):n("",!0),g.value?(t(),s("div",Vs,[e("ul",As,[(t(!0),s(R,null,E(h.value,(u,U)=>(t(),s("li",{key:U,onClick:pe=>ye(u),class:"cursor-pointer px-4 py-2 hover:bg-gray-200 text-sm font-bold"},d(u.first_name)+" "+d(u.last_name),9,Us))),128))])])):n("",!0)])):n("",!0),a.value&&A.value.length?(t(),s("div",Bs,[e("div",{onClick:ve,class:"mt-1 flex justify-between items-center w-full px-3 py-2 border-2 border-yellow focus:border-yellow rounded-md cursor-pointer bg-white gap-2"},[e("div",Ps,[b.value?(t(),s("img",{key:0,src:b.value.image,alt:"snack",class:"bg-center bg-contain bg-no-repeat h-7 w-7"},null,8,Fs)):n("",!0),e("span",Ns,d(b.value?b.value.name:"Snacks disponibili..."),1)]),e("div",Ks,[b.value?(t(),s("span",qs,"€"+d(b.value.gross_price),1)):n("",!0),(t(),s("svg",{class:K([{"rotate-180":C.value,"transition-transform":!0},"w-5 h-5 text-gray-700"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o[12]||(o[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])]),C.value?(t(),s("div",Hs,[e("ul",Xs,[(t(!0),s(R,null,E(A.value,(u,U)=>(t(),s("li",{key:U,onClick:pe=>oe(u),class:"flex justify-between items-center cursor-pointer px-4 py-2 hover:bg-gray-200 gap-2"},[e("div",Ws,[e("img",{src:u.image,alt:"snack",class:"bg-center bg-contain bg-no-repeat !h-7 !w-7"},null,8,Zs)]),e("div",Js,d(u.name),1),e("div",Qs," €"+d(u.gross_price),1)],8,Gs))),128))])])):n("",!0)])):n("",!0),a.value&&P.value.length?(t(),s("h6",Ys," Vuoi ordinare una bevanda? ")):n("",!0),a.value&&P.value.length?(t(),s("div",eo,[e("div",{onClick:_e,class:"mt-1 flex justify-between items-center w-full px-3 py-2 border-2 border-yellow focus:border-yellow rounded-md cursor-pointer bg-white gap-2"},[e("div",to,[M.value?(t(),s("img",{key:0,src:M.value.image,alt:"drink",class:"bg-center bg-contain bg-no-repeat h-7 w-7"},null,8,so)):n("",!0),e("span",oo,d(M.value?M.value.name:"Bevande disponibili..."),1)]),e("div",lo,[M.value?(t(),s("span",no,"€"+d(M.value.gross_price),1)):n("",!0),(t(),s("svg",{class:K([{"rotate-180":_.value,"transition-transform":!0},"w-5 h-5 text-gray-700"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o[13]||(o[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])]),_.value?(t(),s("div",ao,[e("ul",ro,[(t(!0),s(R,null,E(P.value,(u,U)=>(t(),s("li",{key:U,onClick:pe=>ke(u),class:"flex justify-between items-center cursor-pointer px-4 py-2 hover:bg-gray-200 gap-2"},[e("div",co,[e("img",{src:u.image,alt:"drink",class:"bg-center bg-contain bg-no-repeat !h-7 !w-7"},null,8,uo)]),e("div",po,d(u.name),1),e("div",fo," €"+d(u.gross_price),1)],8,io))),128))])])):n("",!0)])):n("",!0),b.value||M.value?(t(),s("h6",mo,[o[14]||(o[14]=e("span",{class:"text-sm font-bold"},"Totale:",-1)),p(" €"+d(N.value.toFixed(2)),1)])):n("",!0)])):n("",!0),a.value?(t(),s("div",vo," L'ordine può essere effettuato e modificato fino alle 13:30 del giorno precedente alla data di consegna. ")):n("",!0),a.value&&G.value&&X.value?(t(),s("div",xo,[e("button",{onClick:o[2]||(o[2]=u=>i.$emit("close")),class:"btn bg-black w-full font-bold text-white uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Annulla "),e("button",{onClick:c,class:"btn bg-[#ffa500] w-full font-bold uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Ordina ")])):n("",!0),!G.value&&a.value?(t(),s("div",ho,[o[16]||(o[16]=e("div",{class:"flex flex-col justify-center items-center text-center py-4 text-xs font-bold"},[e("img",{src:he,alt:"Card",class:"h-9 w-9 cursor-pointer"}),e("div",{class:"font-bold underline"}," Non hai abbastanza denaro sul portafoglio di credito per effettuare l'acquisto ")],-1)),e("div",null,[e("button",{onClick:ie,class:"flex justify-center mx-auto btn bg-yellow uppercase text-black text-xs shadow-button py-3 px-6 rounded-lg"}," Ricaricalo e ordina la tua merenda! ")])])):n("",!0),X.value?n("",!0):(t(),s("button",{key:5,onClick:o[3]||(o[3]=u=>i.$emit("close")),class:"btn bg-yellow w-full font-bold text-black uppercase text-xs shadow-button my-4 mb-2 py-3 px-6 rounded-lg"}," Chiudi "))],512)])):n("",!0)}}}),wo={class:"flex flex-wrap justify-center items-center gap-8 mt-4 md:mt-0"},bo={class:"text-sm font-bold text-center"},yo={class:"text-center text-xs font-bold mb-3"},_o=["onClick"],ko={key:0,class:"text-xs"},Co={key:1,class:"flex flex-col justify-center items-center gap-2"},$o={key:0,class:"flex justify-center items-center"},So=["src","alt"],jo={key:1,class:"flex justify-center items-center"},Do=["src","alt"],Oo=fe({__name:"Calendar",setup(ae){const B=Ve(),x=()=>{B.push("/login")},V=f=>f?f.startsWith("http")?f:`https://www.snacks2school.com${f}`:"",h=r({LUNEDÌ:{date:"",snacks:[],drinks:[]},MARTEDÌ:{date:"",snacks:[],drinks:[]},MERCOLEDÌ:{date:"",snacks:[],drinks:[]},GIOVEDÌ:{date:"",snacks:[],drinks:[]},VENERDÌ:{date:"",snacks:[],drinks:[]},SABATO:{date:"",snacks:[],drinks:[]}}),A=r(!1),P=r(null),D=r([]),g=r(null),C=r(""),_=r(""),O=r(!1),T=r(!1),k=r(!1),l=async()=>{try{const f=localStorage.getItem("authToken");if(!f){console.error("No auth token found.");return}const $=await z.get("https://www.snacks2school.com/api/calendar/week/",{headers:{Authorization:`Token ${f}`},withCredentials:!0});if($.data&&$.data.days){g.value=$.data.days;for(const q of g.value){const Q=new Date(q.date).toLocaleDateString("it-IT",{weekday:"long"}).toUpperCase();h.value[Q]={date:q.date,snacks:q.snacks,drinks:q.drinks}}}else console.error("No calendar data found in the response.")}catch(f){console.error("Error fetching user calendar:",f)}},I=()=>{O.value=!0},m=(f,$)=>{C.value=f,_.value=$,T.value=!0},w=(f,$)=>{C.value=f,_.value=$,k.value=!0},F=()=>{T.value=!1,k.value=!1,O.value=!1,C.value="",_.value=""},te=f=>{F()},le=f=>{F()};return me(async()=>{A.value=await je(),P.value=await ge(),D.value=await Se(),l(),de(T,f=>{f?document.body.style.overflow="hidden":document.body.style.overflow="auto"}),de(k,f=>{f?document.body.style.overflow="hidden":document.body.style.overflow="auto"})}),(f,$)=>{const q=Ne,J=ts,Q=go;return t(),s("div",null,[e("div",wo,[(t(!0),s(R,null,E(h.value,(y,se)=>(t(),s("div",{key:se},[e("h3",bo,d(se),1),e("div",yo,d(y.date),1),e("div",{class:"flex flex-col justify-center items-center text-center h-20 xl:h-40 w-20 xl:w-40 !rounded-xl outline outline-1 outline-[#af4135] outline-offset-4 shadow-card hover:shadow-none transition-all duration-500 cursor-pointer",onClick:H=>{var X,re,S;return A.value?((X=D.value)==null?void 0:X.length)>0?((re=y==null?void 0:y.snacks)==null?void 0:re.length)===0&&((S=y==null?void 0:y.drinks)==null?void 0:S.length)===0?m(se,y.date):w(se,y.date):I():x()}},[y.snacks.length===0&&y.drinks.length===0?(t(),s("div",ko,$[0]||($[0]=[e("p",{class:"font-bold"},"Nessuna merenda",-1),e("p",{class:"text-[#af4135] font-bold"},"Ordina ora",-1)]))):(t(),s("div",Co,[y.snacks.length>0?(t(),s("div",$o,[(t(!0),s(R,null,E(y.snacks,H=>(t(),s("div",{key:H.id},[e("img",{src:V(H.image),alt:H.name,class:"h-5 md:h-7 w-5 md:w-7"},null,8,So)]))),128))])):n("",!0),y.drinks.length>0?(t(),s("div",jo,[(t(!0),s(R,null,E(y.drinks,H=>(t(),s("div",{key:H.id},[e("img",{src:V(H.image),alt:H.name,class:"h-5 md:h-7 w-5 md:w-7"},null,8,Do)]))),128))])):n("",!0)]))],8,_o)]))),128))]),$[1]||($[1]=e("div",{class:"hidden md:block mx-auto text-center mt-12 font-bold text-sm opacity-60"},[p(" Il calendario della prossima settimana diventa disponibile dalla mezzanotte tra venerdì e sabato. "),e("br"),p(" L'ordine può essere effettuato e modificato entro le 13:30 del giorno precedente alla data di consegna. "),e("br"),p(" Ricorda di fare in anticipo l'ordine per lunedì! ")],-1)),$[2]||($[2]=e("div",{class:"block md:hidden mx-auto text-center mt-12 font-bold text-xs opacity-60"}," Il calendario della prossima settimana diventa disponibile dalla mezzanotte tra venerdì e sabato. L'ordine può essere effettuato e modificato entro le 13:30 del giorno precedente alla data di consegna. Ricorda di fare in anticipo l'ordine per lunedì! ",-1)),W(q,{isAddChildVisible:O.value,onClose:F},null,8,["isAddChildVisible"]),W(J,{isInitializeOrderVisible:T.value,selectedDay:C.value,selectedDate:_.value,onClose:F,onOpenInitializeOrder:te},null,8,["isInitializeOrderVisible","selectedDay","selectedDate"]),W(Q,{isEditOrderVisible:k.value,selectedDay:C.value,selectedDate:_.value,onClose:F,onOpenEditOrder:le},null,8,["isEditOrderVisible","selectedDay","selectedDate"])])}}}),To=""+new URL("desk.VvFGJXAT.png",import.meta.url).href,zo=""+new URL("boy_3.BTupQmuS.png",import.meta.url).href,Ro=""+new URL("school_bag.CicfdDBd.png",import.meta.url).href,Eo=""+new URL("girl.BAw7ZQCo.png",import.meta.url).href,Io=""+new URL("boy.ZaitAl5U.png",import.meta.url).href,Re=""+new URL("calendar.DMU9lXHW.png",import.meta.url).href,Ee=""+new URL("trust.D1xY0g85.png",import.meta.url).href,Ie=""+new URL("location.pZgcBjTw.png",import.meta.url).href,Lo=""+new URL("solution.CKafvuPt.png",import.meta.url).href,Mo=""+new URL("headset.ssfsgUlG.png",import.meta.url).href,Vo=""+new URL("friendship.BZX-ZgDo.png",import.meta.url).href,Ao=""+new URL("hands.DbMfNOpm.png",import.meta.url).href,Uo=""+new URL("health.KJx9MeYG.png",import.meta.url).href,Bo=""+new URL("sleeping-mask.B6jkK09u.png",import.meta.url).href,Po=""+new URL("quality.C-CBWLr6.png",import.meta.url).href,Fo={key:0,class:"fixed inset-0 flex justify-center items-center z-30 !px-4 md:px-0",style:{"backdrop-filter":"blur(50px)"}},No={class:"bg-white p-8 !rounded-3xl outline outline-4 outline-white outline-offset-4 shadow-card w-full max-w-96 max-h-[500px] overflow-y-auto"},Ko={class:"flex justify-center gap-2"},qo=fe({__name:"ReferralExplenation",props:{isReferralExplenationVisible:{type:Boolean}},emits:["close"],setup(ae,{emit:B}){const x=r(!1);return me(async()=>{x.value=await je()}),(V,h)=>{const A=Le("router-link");return V.isReferralExplenationVisible?(t(),s("div",Fo,[e("div",No,[h[1]||(h[1]=Ae('<h2 class="text-xl text-center font-bold mb-2"> Ricevere credito su Snacks2School </h2><div class="text-center text-sm mb-4"> Se porti un amico su Snacks2School, riceverai un credito di 1€ non appena lui ricaricherà il proprio portafoglio di credito. Il numero di amici che puoi portare è illimitato! In questo modo potrai ricevere un credito significativo per fare i tuoi acquisti! </div><div class="text-center text-sm font-bold">Come fare:</div><div class="text-center text-sm">• Vai sul tuo profilo</div><div class="text-center text-sm"> • Clicca sul relativo pulsante nella sezione &quot;Condividi Snacks2School&quot; </div><div class="text-center text-sm">• Invia il link a chi vuoi</div>',6)),e("div",Ko,[W(A,{to:x.value?"/profile":"/login"},{default:ce(()=>h[0]||(h[0]=[e("button",{class:"btn bg-[#bf09bd] w-full text-white font-bold uppercase text-xs shadow-button my-4 mb-4 !py-3 !px-6 !rounded-lg outline outline-1 outline-[#bf09bd] outline-offset-4 shadow-btn hover:shadow-none transition-all duration-500 mt-6"}," Profilo ",-1)])),_:1},8,["to"])])])])):n("",!0)}}}),Ho={class:"flex !justify-center !items-center !mx-auto mt-12"},Xo={class:"swiper-wrapper__inner"},Go={class:"swiper-cards",width:240,"slides-per-view":1,loop:!0,effect:"cards",autoplay:{delay:1e3,disableOnInteraction:!0}},Wo={class:"swiper-slide-content flex flex-col justify-center items-center"},Zo=["src","alt"],Jo={class:"font-bold text-center text-sm"},Qo={class:"flex flex-col justify-center items-center"},Yo={key:0,class:"max-w-screen-xl mx-auto flex flex-col justify-center items-center !py-10 md:py-16 mt-4 md:mt-12 !px-4 gap-6 md:gap-10"},el={class:"mx-auto text-center font-bold text-xs md:text-sm opacity-60 !px-4 underline"},tl={class:"max-w-screen-xl mx-auto flex flex-col justify-center items-center !px-4 mb-4 md:mb-0 !py-4 md:py-16 mt-6 gap-6 md:gap-10"},sl={class:"mx-auto text-center font-bold text-xs md:text-sm opacity-60 !px-4"},ol={key:0},ll={class:"max-w-screen-xl mx-auto flex flex-col justify-center items-center !py-6 !pt-10 !pb-12 md:py-16 !px-4 gap-2 md:gap-12"},nl={class:"pt-6 md:pt-16 pb-0 md:pb-10"},al={class:"max-w-screen-xl mx-auto flex flex-col justify-center items-center mt-2 md:mt-0 !px-4 gap-12 mb-5 md:mb-0"},rl={key:0,class:"text-2xl md:text-6xl xl:text-8xl text-center font-bold mb-2 md:mb-0"},il={key:1,class:"max-w-screen-xl mx-auto flex flex-col justify-center items-center !px-4 mb-4 md:mb-0"},cl={class:"text-2xl md:text-6xl xl:text-8xl text-center font-bold mb-2"},dl={class:"flex justify-center items-center gap-2 md:gap-7"},ul={class:"text-[#a688f9]"},pl={class:"flex !justify-center !items-center !mx-auto !py-4"},fl={class:"swiper-wrapper__inner"},ml={key:0,class:"swiper-cards mx-auto","slides-per-view":1,loop:!0,effect:"cards"},vl={class:"swiper-slide-content flex flex-col justify-center items-center"},xl=["src"],Sl=fe({__name:"index",setup(ae){const{$device:B}=Ue();r(B.isMobile);const x=r(!1),V=r(null),h=r([]),A=[{class:"flex flex-col justify-center items-center bg-[#ffa500] !h-40 !w-60 !rounded-xl p-4 text-center cursor-pointer shadow-card transition-all duration-500 outline outline-1 outline-[#ffa500] outline-offset-4 cursor-pointer shadow-card hover:shadow-none transition-all duration-500 gap-1",imgSrc:Uo,imgAlt:"Health",imgClass:"h-8 w-8",title:"Salute e tutela",texts:["Trasparenza sugli ingredienti.","Allergeni sempre in evidenza."]},{class:"flex flex-col justify-center items-center bg-[#a688f9] !h-40 !w-60 !rounded-xl p-4 lg:p-8 text-center cursor-pointer shadow-card transition-all duration-500 outline outline-1 outline-[#a688f9] outline-offset-4 cursor-pointer shadow-card hover:shadow-none transition-all duration-500 gap-1",imgSrc:Po,imgAlt:"Comfort",imgClass:"h-7 w-7",title:"Gustosissimo",texts:["Materie prime di qualità elevatissima. Ogni morso è gustosissimo."]},{class:"flex flex-col justify-center items-center bg-[#ffa500] !h-40 !w-60 !rounded-xl p-4 lg:p-8 text-center cursor-pointer shadow-card transition-all duration-500 outline outline-1 outline-[#ffa500] outline-offset-4 cursor-pointer shadow-card hover:shadow-none transition-all duration-500 gap-1",imgSrc:Re,imgAlt:"Calendar",imgClass:"h-7 w-7",title:"Snacks Calendar",texts:["Ogni giorno uno snack diverso. Una dieta varia e sana è fondamentale per la salute di tuo figlio."]},{class:"flex flex-col justify-center items-center bg-[#a688f9] !h-40 !w-60 !rounded-xl p-4 lg:p-8 text-center cursor-pointer shadow-card transition-all duration-500 outline outline-1 outline-[#a688f9] outline-offset-4 cursor-pointer shadow-card hover:shadow-none transition-all duration-500 gap-1",imgSrc:Bo,imgAlt:"Cash",imgClass:"h-9 w-9",title:"Comodità",texts:["Di' addio alle mattinate frenetiche. Ordina comodamente dal tuo divano."]},{class:"flex flex-col justify-center items-center bg-[#ffa500] !h-40 !w-60 !rounded-xl p-4 lg:p-8 text-center cursor-pointer shadow-card transition-all duration-500 outline outline-1 outline-[#ffa500] outline-offset-4 cursor-pointer shadow-card hover:shadow-none transition-all duration-500 gap-1",imgSrc:De,imgAlt:"Safety",imgClass:"h-7 w-7",title:"Risparmio",texts:["Prezzi più bassi rispetto al dettaglio e alle merende industriali."]}],P=r(null),D=async()=>(await z.get("https://www.snacks2school.com/api/v1/stripe/stripe-pub-key/")).data.publicKey;Be(),r([]);const g=r(!1),C=()=>{g.value=!0},_=()=>{g.value=!1},O=r([]),T=r(!1);return r(null),de(T,k=>{k?document.body.style.overflow="hidden":document.body.style.overflow=""}),me(async()=>{x.value=await je(),V.value=await ge(),O.value=(await z.get("https://www.snacks2school.com/api/featured-snacks/")).data,h.value=(await z.get("https://www.snacks2school.com/api/stores/")).data;const k=await D();P.value=Stripe(k)}),(k,l)=>{const I=We,m=Le("router-link"),w=Oo;return t(),Oe(Te(Fe),null,{default:ce(()=>[W(Te(Pe),{fullscreen:!0},{default:ce(()=>{var F,te,le;return[e("div",null,[W(qe),e("div",null,[l[19]||(l[19]=e("div",{class:"flex justify-center items-center mx-auto mt-12 gap-6"},[e("div",{class:"text-4xl md:text-6xl xl:text-8xl xl:text-9xl text-center font-bold mb-4"},[e("div",null,[p("La "),e("span",{class:"text-[#ffa500]"}," merenda"),p(" a")]),e("div",{class:"flex justify-center items-center gap-2 md:gap-6"},[e("div",{class:"flex items-center gap-2 md:gap-6"},[p(" portata "),e("img",{src:To,alt:"Desk",class:"h-10 md:h-36 w-10 md:w-36 cursor-pointer"}),e("span",{class:"text-[#a688f9]"},"di "),e("span",{class:"text-[#bf09bd]"},"clic")])])])],-1)),l[20]||(l[20]=e("div",{class:"mx-auto text-center font-bold text-sm md:text-lg !px-4 -mt-2 md:mt-4 mb-4"}," Tu ordini. Noi la consegniamo a scuola. ",-1)),e("div",Ho,[e("div",Xo,[W(I,null,{default:ce(()=>[e("swiper-container",Go,[(t(),s(R,null,E(A,f=>e("swiper-slide",{key:`slide-card-${f.id}`,class:K(f.class)},[e("div",Wo,[e("img",{src:f.imgSrc,alt:f.imgAlt,class:"h-9 w-9 mb-2"},null,8,Zo),e("div",Jo,d(f.title),1),e("div",Qo,[(t(!0),s(R,null,E(f.texts,($,q)=>(t(),s("p",{class:"text-xs",key:q},d($),1))),128))])])],2)),64))])]),_:1})])]),l[21]||(l[21]=e("div",{class:"mx-auto text-center font-bold text-xs md:text-sm opacity-60 !px-4 -mt-2 md:mt-0 mb-6"},[p(" Leggere le card può nuocere gravemente"),e("br"),p(" al numero di merende che ordini. ")],-1)),x.value&&((F=V.value)!=null&&F.value)&&V.value.value.is_store?(t(),s("div",Yo,[l[1]||(l[1]=e("div",{class:"text-2xl md:text-6xl xl:text-8xl text-center font-bold mb-2 md:mb-0"},[e("div",{class:"flex justify-center items-center gap-2 md:gap-7"},[e("img",{src:He,alt:"Trust",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer"}),p(" Vai al "),e("span",{class:"text-[#ffa500]"},"gestionale"),p(" e ")]),e("div",null,[e("div",{class:"flex justify-center items-center gap-2 md:gap-7"},[e("div",null,[p(" scopri i "),e("span",{class:"text-[#bf09bd]"},"nuovi "),e("span",{class:"text-[#a688f9]"},"ordini ")])])])],-1)),e("div",el,[W(m,{to:"/orders"},{default:ce(()=>l[0]||(l[0]=[p("Fai clic qui.")])),_:1})])])):n("",!0),l[22]||(l[22]=e("hr",null,null,-1)),e("div",tl,[l[8]||(l[8]=e("div",{class:"text-2xl md:text-6xl xl:text-8xl text-center font-bold mb-2"},[p(" Rendiamo più "),e("span",{class:"text-[#a688f9]"},"semplice"),e("br"),p(" il "),e("span",{class:"text-[#ffa500]"},"mestiere"),p(" più "),e("span",{class:"text-[#bf09bd]"},"difficile:"),e("br"),p(" il "),e("span",{class:"text-[#af4135]"},"genitore")],-1)),l[9]||(l[9]=e("div",{class:"max-w-screen-xl mx-auto flex justify-center items-center !px-4 gap-2"},[e("img",{src:zo,alt:"Tomato",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer inline-block align-middle ml-2 md:ml-7"}),e("img",{src:Ro,alt:"Lettuce",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer inline-block align-middle ml-2 md:ml-7"}),e("img",{src:Eo,alt:"Oil",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer inline-block align-middle ml-2 md:ml-7"})],-1)),e("div",sl,[l[5]||(l[5]=p(" Gestisci la merenda e il pranzo")),l[6]||(l[6]=e("br",null,null,-1)),l[7]||(l[7]=p(" di tutti i tuoi figli in un unico account. ")),x.value?(t(),s("span",ol,[l[3]||(l[3]=p(" Vai sul tuo ")),W(m,{to:"/profile",class:"!text-black font-bold underline"},{default:ce(()=>l[2]||(l[2]=[p("profilo")])),_:1}),l[4]||(l[4]=p(" per aggiungere i tuoi figli. "))])):n("",!0)])]),l[23]||(l[23]=e("hr",null,null,-1)),e("div",ll,[l[10]||(l[10]=e("div",{class:"text-2xl md:text-6xl xl:text-8xl text-center font-bold mb-4"},[e("div",null,[p(" La "),e("span",{class:"text-[#af4135]"},"merenda"),p(" che "),e("span",{class:"text-[#bf09bd]"},"cambia"),p(", ")]),e("div",{class:"flex justify-center items-center gap-2 md:gap-6"},[e("div",null,[p("come "),e("span",{class:"text-[#a688f9]"},"tuo figlio")]),e("img",{src:Io,alt:"Boy",class:"h-10 md:h-20 w-10 md:w-20 cursor-pointer"})]),e("div",{class:"flex justify-center items-center gap-2 md:gap-6"},[e("img",{src:Re,alt:"Calendar",class:"h-10 md:h-20 w-10 md:w-20 cursor-pointer"}),e("div",{class:"text-[#ffa500]"},"#snackscalendar")])],-1)),e("div",null,[W(w)])]),l[24]||(l[24]=e("hr",null,null,-1)),e("div",nl,[e("div",al,[x.value?n("",!0):(t(),s("div",rl,l[11]||(l[11]=[e("div",{class:"flex justify-center items-center gap-2 md:gap-7"},[e("img",{src:Ee,alt:"Trust",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer"}),p(" I nostri "),e("span",{class:"text-[#af4135]"},"store")],-1),e("div",null,[e("div",{class:"flex justify-center items-center gap-2 md:gap-7"},[p(" di "),e("span",{class:"text-[#bf09bd]"},"fiducia"),e("img",{src:Ie,alt:"Location",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer"})])],-1)]))),x.value?(t(),s("div",il,[e("div",cl,[l[16]||(l[16]=e("div",{class:"flex justify-center items-center gap-2 md:gap-7"},[e("img",{src:Ee,alt:"Trust",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer"}),e("span",{class:"text-[#af4135]"},"Store"),p(" che "),e("span",{class:"text-[#ffa500]"},"consegnano")],-1)),e("div",null,[e("div",dl,[l[12]||(l[12]=p(" nella ")),l[13]||(l[13]=e("span",{class:"text-[#bf09bd]"},"provincia",-1)),l[14]||(l[14]=p(" di ")),e("span",ul,d((le=(te=V.value)==null?void 0:te.location)==null?void 0:le.name),1),l[15]||(l[15]=e("img",{src:Ie,alt:"Location",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer"},null,-1))])])])])):n("",!0)]),e("div",pl,[e("div",fl,[W(I,null,{default:ce(()=>[h.value.length>0?(t(),s("swiper-container",ml,[(t(!0),s(R,null,E(h.value,f=>(t(),s("swiper-slide",{key:`slide-card-${f.id}`,class:"flex flex-col justify-center items-center !h-40 !w-40 !rounded-xl p-4 text-center cursor-pointer shadow-card transition-all duration-500 outline outline-1 outline-offset-4 outline-[#af4135] cursor-pointer shadow-card hover:shadow-none transition-all duration-500 gap-1 bg-[#ffffff]"},[e("div",vl,[e("img",{src:f.profile_picture,class:"bg-center bg-contain bg-no-repeat h-32 w-32"},null,8,xl)])]))),128))])):n("",!0)]),_:1})])])]),l[25]||(l[25]=e("hr",null,null,-1)),e("div",{class:"max-w-screen-xl mx-auto flex flex-col justify-center items-center !py-2 md:py-16 !px-4 my-8"},[l[17]||(l[17]=e("div",{class:"text-2xl md:text-6xl xl:text-8xl text-center font-bold mb-2"},[e("div",{class:"flex justify-center items-center gap-2 md:gap-7"},[e("img",{src:Ke,alt:"Trust",class:"h-10 md:h-20 lg:h-28 w-10 md:w-20 lg:w-28 cursor-pointer"}),p(" Chi "),e("span",{class:"text-[#af4135]"},"trova"),p(" un ")]),e("div",null,[e("div",{class:"flex justify-center items-center gap-2 md:gap-7"},[e("div",null,[e("span",{class:"text-[#bf09bd]"},"amico"),p(" trova un "),e("span",{class:"text-[#a688f9]"},"tesoro")])])])],-1)),e("div",{class:"flex justify-center mb-2"},[e("button",{class:"btn bg-[#bf09bd] w-full text-white font-bold uppercase text-xs shadow-button my-4 mb-4 !py-3 !px-6 !rounded-lg outline outline-1 outline-[#bf09bd] outline-offset-4 shadow-lightCard hover:shadow-none transition-all duration-500",onClick:C}," Scopri di più ")]),l[18]||(l[18]=e("div",{class:"mx-auto text-center font-bold text-xs md:text-sm opacity-60 !px-4"}," Se porti un amico su Snacks2School, riceverai un credito non appena lui ricaricherà il suo portafoglio di credito. Il numero di amici che puoi portare è illimitato! ",-1))]),g.value?(t(),Oe(qo,{key:1,isReferralExplenationVisible:g.value,onClose:_},null,8,["isReferralExplenationVisible"])):n("",!0),l[26]||(l[26]=e("hr",null,null,-1)),l[27]||(l[27]=e("div",{class:"max-w-screen-xl mx-auto flex flex-col justify-center items-center pb-10 md:pb-16 mt-10 md:mt-12 !px-4 gap-6 md:gap-10"},[e("div",{class:"text-2xl md:text-6xl xl:text-8xl text-center font-bold"},[e("div",{class:"flex justify-center items-center gap-2 md:gap-7"},[e("img",{src:Lo,alt:"Trust",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer"}),p(" Qualcosa non va? ")]),e("div",null,[e("div",{class:"flex justify-center items-center gap-2 md:gap-7"},[e("div",null,[e("span",{class:"text-[#ffa500]"},"Niente paura!"),p(" Il nostro "),e("span",{class:"text-[#bf09bd]"},"customer care"),p(" è "),e("span",{class:"text-[#a688f9]"},"sartoriale")])])])]),e("div",{class:"max-w-screen-xl mx-auto flex justify-center items-center !px-4 gap-2"},[e("img",{src:Mo,alt:"Headset",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer align-middle ml-2 md:ml-7"}),e("img",{src:Vo,alt:"Friendship",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer inline-block align-middle ml-2 md:ml-7"}),e("img",{src:Ao,alt:"Hands",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer inline-block align-middle ml-2 md:ml-7"})]),e("div",{class:"mx-auto text-center font-bold text-xs md:text-sm !px-4"},[e("span",{class:"opacity-60"}," Siamo qui per supportarti - "),e("a",{href:"mailto:snacks2school@gmail.com",class:"!text-[#a688f9] underline"}," snacks2school@gmail.com ")])],-1)),W(Xe)])])]}),_:1})]),_:1})}}});export{Sl as default};
