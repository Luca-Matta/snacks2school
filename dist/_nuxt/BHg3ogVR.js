import{_ as i}from"./BC9YvzMU.js";import{a as s}from"./upsvKRUO.js";import{d as p,t as b,v as u,z as f,x as n}from"./zBMnQkMZ.js";import"./s43lJ_pP.js";const m={class:"flex flex-col justify-center items-center text-center gap-2 max-w-44 !py-16 mx-auto"},k=p({__name:"retrieve",setup(w){const l=async()=>(await s.get("http://localhost:8000/api/csrf-token/",{withCredentials:!0})).data.csrfToken,c=async()=>{try{const e=await l(),t=await s.post("http://localhost:8000/api/send-order-files/",{},{headers:{"X-CSRFToken":e},withCredentials:!0});alert("Files generated successfully!")}catch(e){console.error("Error generating files:",e),alert("Failed to generate files. Please try again.")}},a=async e=>{try{const t=await s.get(`http://localhost:8000/api/retrieve-order-file/${e}/`,{responseType:"blob",withCredentials:!0}),o=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=o,r.setAttribute("download",`order_details.${e}`),document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch(t){console.error(`Error retrieving ${e} file:`,t),alert(`Failed to retrieve ${e.toUpperCase()} file. Please try again.`)}},d=async()=>{try{const e=await s.get("http://localhost:8000/api/snack-order-labels/",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=t,o.setAttribute("download","snack_order_labels.pdf"),document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(e){console.error("Error generating labels:",e)}};return(e,t)=>{const o=i;return b(),u("div",null,[f(o),n("div",m,[n("button",{onClick:c,class:"btn bg-[#a688f9] w-full font-bold uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Genera file "),n("button",{onClick:t[0]||(t[0]=r=>a("pdf")),class:"btn bg-black w-full font-bold uppercase text-white text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Scarica PDF "),n("button",{onClick:t[1]||(t[1]=r=>a("csv")),class:"btn bg-[#ffa500] w-full font-bold uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Scarica CSV "),n("button",{onClick:d,class:"btn bg-[#bf09bd] text-white w-full font-bold uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Genera etichette merende ")])])}}});export{k as default};
