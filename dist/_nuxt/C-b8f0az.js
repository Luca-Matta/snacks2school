import{_ as i}from"./BDuq0xm9.js";import{a as n}from"./upsvKRUO.js";import{d as p,t as b,v as u,z as m,x as s}from"./BPmhSm-Y.js";import"./BXyX1x7l.js";const w={class:"flex flex-col justify-center items-center text-center gap-2 max-w-44 !py-16 mx-auto"},y=p({__name:"retrieve",setup(f){const c=async()=>(await n.get("https://www.snacks2school.com/api/csrf-token/",{withCredentials:!0})).data.csrfToken,l=async()=>{try{const e=await c(),t=await n.post("https://www.snacks2school.com/api/send-order-files/",{},{headers:{"X-CSRFToken":e},withCredentials:!0});alert("Files generated successfully!")}catch(e){console.error("Error generating files:",e),alert("Failed to generate files. Please try again.")}},a=async e=>{try{const t=await n.get(`https://www.snacks2school.com/api/retrieve-order-file/${e}/`,{responseType:"blob",withCredentials:!0}),o=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=o,r.setAttribute("download",`order_details.${e}`),document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch(t){console.error(`Error retrieving ${e} file:`,t),alert(`Failed to retrieve ${e.toUpperCase()} file. Please try again.`)}},d=async()=>{try{const e=await n.get("https://www.snacks2school.com/api/snack-order-labels/",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=t,o.setAttribute("download","snack_order_labels.pdf"),document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(e){console.error("Error generating labels:",e)}};return(e,t)=>{const o=i;return b(),u("div",null,[m(o),s("div",w,[s("button",{onClick:l,class:"btn bg-[#a688f9] w-full font-bold uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Genera file "),s("button",{onClick:t[0]||(t[0]=r=>a("pdf")),class:"btn bg-black w-full font-bold uppercase text-white text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Scarica PDF "),s("button",{onClick:t[1]||(t[1]=r=>a("csv")),class:"btn bg-[#ffa500] w-full font-bold uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Scarica CSV "),s("button",{onClick:d,class:"btn bg-[#bf09bd] text-white w-full font-bold uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Genera etichette merende ")])])}}});export{y as default};
