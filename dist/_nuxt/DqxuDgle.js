import{c as D,g as Q,a as X,_ as Y}from"./CW2Tqlor.js";import{d as z,i as M,r as i,o as I,g as q,t as l,v as r,x as e,B as h,y as f,z as k,A as U,N as m,S as Z,T as A,W as R,P as $,Q as S,H as E,I as L,J as ee,K as te}from"./Lh55aVSo.js";import{a as se,_ as oe}from"./UehtUs6s.js";import{a as g}from"./upsvKRUO.js";import{_ as le}from"./RgGFD2VX.js";import{_ as ne}from"./CpxjANgY.js";import"./inWKtfgP.js";const ae={key:0,class:"fixed inset-0 flex justify-center items-center z-30 !px-4 md:px-0",style:{"backdrop-filter":"blur(50px)"}},ie={class:"bg-white p-8 !rounded-3xl outline outline-4 outline-white outline-offset-4 shadow-card w-full max-w-96 max-h-[500px] overflow-y-auto"},re={class:"text-xl text-center font-bold mb-2"},ce={class:"underline"},de={class:"text-center text-sm mb-4"},ue={class:"flex justify-center gap-2"},pe=z({__name:"ReferralUserType",props:{isReferralUserTypeVisible:{type:Boolean},userType:{},selectedLink:{}},emits:["close"],setup(T,{emit:w}){const n=T,v=M(()=>n.userType==="customer"?"genitori":"membri del personale scolastico"),y=i(!1),d=()=>{const u={title:"Snacks2School | La merenda a portata di clic",text:"Scopri Snacks2School, l'app che ti permette di ordinare la merenda comodamente dal tuo divano e riceverla a scuola! La qualità dei prodotti è elevatissima, ma i prezzi sono più bassi rispetto al dettaglio e alle merende industriali.",url:n.selectedLink};navigator.share?navigator.share(u).then(()=>console.log("Successful share")).catch(c=>console.log("Error sharing",c)):alert("Web Share API is not supported in your browser.")};return I(async()=>{y.value=await D()}),(u,c)=>{const b=q("router-link");return u.isReferralUserTypeVisible?(l(),r("div",ae,[e("div",ie,[e("h2",re,[c[0]||(c[0]=h(" Hai copiato il link ")),e("span",ce,"da inviare ai "+f(v.value),1)]),e("div",de,[h(" Non ti resta che inviarlo a tutti i "+f(v.value)+" che vuoi. ",1),c[1]||(c[1]=e("br",null,null,-1)),c[2]||(c[2]=h(" Per ognuno di essi, non appena si sarà registrato e avrà ricaricato il proprio portafoglio di credito, riceverai 1€ di credito da spendere su Snacks2School! "))]),e("div",ue,[k(b,{to:"/",class:"w-full"},{default:U(()=>c[3]||(c[3]=[e("button",{class:"btn bg-black text-white w-full font-bold uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Torna alla Home ",-1)])),_:1}),e("button",{class:"btn bg-[#ffa500] w-full font-bold uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg",onClick:d}," Condividi ")])])])):m("",!0)}}}),fe={class:"fixed inset-0 flex justify-center items-center z-30 !px-4 md:px-0",style:{"backdrop-filter":"blur(50px)"}},me={class:"bg-white p-8 !rounded-3xl outline outline-4 outline-white outline-offset-4 shadow-card w-full max-w-96 max-h-[500px] overflow-y-auto"},xe={class:"mb-3"},ve=["value"],be={key:0,class:"mb-3"},he=["value"],we={key:1,class:"mb-3"},ye=["value"],_e={class:"flex flex-col md:flex-row gap-2"},ge=z({__name:"EditChildProfile",props:{childId:{type:Number,required:!0}},setup(T){const w=T;i(!1);const n=i(null),v=i([]),y=i([]),d=i(null),u=i(""),c=i([]),b=async()=>(await g.get("https://www.snacks2school.com/api/csrf-token/",{withCredentials:!0})).data.csrfToken,_=async()=>{try{const o=await g.get("https://www.snacks2school.com/api/provinces/");v.value=o.data}catch(o){console.error("Error fetching provinces:",o)}},P=async()=>{if(n.value)try{const o=await g.get(`https://www.snacks2school.com/api/province/schools/?province=${n.value}`);y.value=o.data}catch(o){console.error("Error fetching schools:",o)}},V=async()=>{if(d.value)try{const o=await g.get(`https://www.snacks2school.com/api/school/classes/?school=${d.value}`);c.value=o.data}catch(o){console.error("Error fetching classes:",o)}},C=async()=>{try{const o=await b(),t=await g.post(`https://www.snacks2school.com/api/children/${w.childId}/edit/`,{associated_schools:[d.value],school_class:u.value},{headers:{"X-CSRFToken":o},withCredentials:!0})}catch(o){console.error("Error updating child profile:",o)}};return I(async()=>{_();const t=(await g.get(`https://www.snacks2school.com/api/children/${w.childId}`)).data;d.value=t.associated_schools[0],u.value=t.school_class}),(o,t)=>(l(),r("div",fe,[e("div",me,[t[11]||(t[11]=e("h2",{class:"text-xl text-center font-bold"},"Modifica le informazioni di",-1)),e("form",{class:"flex flex-col mt-3",onSubmit:t[4]||(t[4]=Z(()=>{},["prevent"]))},[e("div",xe,[t[6]||(t[6]=e("label",{class:"block text-center text-xs font-bold mb-2"}," Provincia della scuola *",-1)),A(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>n.value=a),id:"selectedProvince",name:"selectedProvince",class:"w-full bg-[#f5f5f5] border border-[1.5px] border-[#bf09bd] !rounded !px-2 !py-1 cursor-pointer",style:{"border-radius":"5px",padding:"7px"},onChange:P},[t[5]||(t[5]=e("option",{value:"",disabled:""},null,-1)),(l(!0),r($,null,S(v.value,a=>(l(),r("option",{key:a.id,value:a.id},f(a.name),9,ve))),128))],544),[[R,n.value]])]),n.value?(l(),r("div",be,[t[8]||(t[8]=e("label",{class:"block text-center text-xs font-bold mb-2"},"Scuola *",-1)),A(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>d.value=a),id:"associatedSchool",name:"associatedSchool",class:"w-full bg-[#f5f5f5] border border-[1.5px] border-[#bf09bd] !rounded !px-2 !py-1 cursor-pointer",onChange:V},[t[7]||(t[7]=e("option",{value:"",disabled:""},null,-1)),(l(!0),r($,null,S(y.value,a=>(l(),r("option",{key:a.id,value:a.id},f(a.name),9,he))),128))],544),[[R,d.value]])])):m("",!0),d.value?(l(),r("div",we,[t[10]||(t[10]=e("label",{class:"block text-center text-xs font-bold mb-2"},"Classe * ",-1)),A(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>u.value=a),id:"schoolClass",name:"schoolClass",class:"w-full bg-[#f5f5f5] border border-[1.5px] border-[#bf09bd] !rounded !px-2 !py-1 cursor-pointer",style:{"border-radius":"5px",padding:"7px"}},[t[9]||(t[9]=e("option",{value:"",disabled:""},null,-1)),(l(!0),r($,null,S(c.value,a=>(l(),r("option",{key:a.id,value:a.id},f(a.name),9,ye))),128))],512),[[R,u.value]])])):m("",!0),e("div",_e,[e("button",{onClick:t[3]||(t[3]=a=>o.$emit("close")),class:"btn bg-black w-full font-bold text-white uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Annulla "),e("button",{onClick:C,class:"btn bg-[#bf09bd] text-white w-full font-bold uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Salva ")])],32)])]))}}),ke=""+new URL("account.jD8FqEST.png",import.meta.url).href,Ce={class:"px-4"},$e={class:"flex flex-col justify-center items-center max-w-screen-xl mx-auto !py-16 gap-6"},Se={class:"text-2xl md:text-6xl text-center font-bold"},Te={class:"flex flex-wrap gap-8"},Pe={class:"text-xl font-bold"},Ue={key:0,class:"font-bold"},Ve={key:1,class:"font-bold"},je={key:2,class:"text-lg font-bold"},Ae={class:"text-center text-sm"},Re={class:"max-w-screen-xl mx-auto flex flex-col justify-center items-center !py-10 md:py-16 !px-4"},Ee={class:"flex justify-center gap-6"},Le={key:2,class:"max-w-screen-xl mx-auto flex flex-col justify-center items-center pb-16 !px-4 gap-6 md:gap-10"},ze={class:"mx-auto text-center font-bold text-xs md:text-sm !px-4 underline"},He=z({__name:"profile",setup(T){const w=i(!1),n=i(null),v=i([]),y=i(null),d=i(!1),u=i([]),c=i(null),b=i(!1),_=i(!1),P=i("customer"),V=()=>{b.value=!1};let C=i("");const o=x=>{c.value=x,d.value=!0},t=()=>{b.value=!0};M(()=>n.value&&n.value.credit_wallet_amount>0);const a=x=>{_.value=!0,P.value=x},H=()=>{_.value=!1},N=async x=>{let s="";x==="customer"?(s=n.value.referral_link_customer,C=n.value.referral_link_customer):x==="school_staff"&&(s=n.value.referral_link_school_staff,C=n.value.referral_link_school_staff);try{await navigator.clipboard.writeText(s),a(x)}catch(j){console.error("Failed to copy: ",j)}};return I(async()=>{w.value=await D(),n.value=await Q(),n.value&&(v.value=n.value.associated_schools,y.value=n.value.location.name,u.value=await X())}),(x,s)=>{const j=Y,W=pe,G=oe,J=ge,K=q("router-link"),O=le;return l(),E(L(te),null,{default:U(()=>[k(L(ee),{fullscreen:!0},{default:U(()=>{var B;return[e("div",null,[k(j),e("div",Ce,[e("div",$e,[s[7]||(s[7]=e("div",{class:"flex justify-center items-center gap-2 md:gap-7"},[e("img",{src:ke,alt:"Account",class:"h-16 md:h-32 w-16 md:w-32 cursor-pointer"})],-1)),e("div",Se,[e("div",null,[h(" Ehi "+f((B=n.value)==null?void 0:B.first_name)+", benvenuto nel ",1),s[3]||(s[3]=e("span",{class:"text-[#a688f9]"},"tuo ",-1)),s[4]||(s[4]=e("span",{class:"text-[#bf09bd]"},"profilo!",-1))])]),e("div",Te,[(l(!0),r($,null,S(u.value,p=>(l(),r("div",{key:p.id,class:"flex flex-col justify-center items-center mx-auto !px-4 gap-1 bg-white shadow-card !rounded-xl outline outline-[#bf09bd] outline-offset-4 outline-1 hover:shadow-none transition-all duration-500 max-w-[500px] p-6 mt-6"},[e("div",Pe,f(p.first_name)+" "+f(p.last_name),1),p.associated_schools.length>1?(l(),r("div",Ue," Scuole ")):m("",!0),p.associated_schools.length<=1?(l(),r("div",Ve," Scuola ")):m("",!0),(l(!0),r($,null,S(p.associated_schools,F=>(l(),r("div",{key:F.id,class:"text-center text-sm"},f(F.name),1))),128)),p.school_class.name!="Personale scolastico"?(l(),r("div",je," Classe ")):m("",!0),e("div",Ae,f(p.school_class.name),1),e("div",{class:"flex justify-center items-center"},[e("button",{onClick:o,class:"bg-[#bf09bd] w-full text-white font-bold uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-6 !rounded-lg"}," Modifica ")])]))),128))]),e("div",{class:"max-w-screen-xl mx-auto flex flex-col justify-center items-center !px-4"},[e("button",{onClick:t,class:"bg-[#bf09bd] w-full text-white font-bold uppercase text-xs shadow-button my-4 mb-2 !py-3 !px-20 !rounded-lg outline outline-1 outline-[#bf09bd] outline-offset-4 shadow-card hover:shadow-none transition-all duration-500"}," Aggiungi un figlio ")]),e("div",Re,[s[5]||(s[5]=e("div",{class:"text-2xl md:text-6xl text-center font-bold mb-2"},[e("div",{class:"flex flex-col justify-center items-center gap-2 md:gap-7"},[e("img",{src:se,alt:"Trust",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer"}),e("div",null,"Condividi Snacks2School con")])],-1)),e("div",Ee,[e("button",{class:"bg-black w-full text-white font-bold uppercase text-xs shadow-button my-4 mb-4 !py-3 !px-6 !rounded-lg outline outline-1 outline-black outline-offset-4 shadow-btn hover:shadow-none transition-all duration-500",onClick:s[0]||(s[0]=p=>N("customer"))}," Genitori "),e("button",{onClick:s[1]||(s[1]=p=>N("school_staff")),class:"bg-[#a688f9] text-white w-full font-bold uppercase text-xs shadow-button my-4 mb-4 !py-3 !px-6 !rounded-lg outline outline-1 outline-[#a688f9] outline-offset-4 shadow-btn hover:shadow-none transition-all duration-500"}," Personale scolastico ")]),s[6]||(s[6]=e("div",{class:"mx-auto text-center font-bold text-xs md:text-sm opacity-60 !px-4 mt-4"}," Clicca sul pulsante per copiare il link e invialo ad un amico! Riceverai un credito di 1€ non appena lui ricaricherà il suo portafoglio di credito. ",-1))])])]),_.value?(l(),E(W,{key:0,isReferralUserTypeVisible:_.value,userType:P.value,selectedLink:L(C),onClose:H},null,8,["isReferralUserTypeVisible","userType","selectedLink"])):m("",!0),k(G,{isAddChildVisible:b.value,onClose:V},null,8,["isAddChildVisible"]),d.value?(l(),E(J,{key:1,"child-id":c.value,onClose:s[2]||(s[2]=p=>d.value=!1)},null,8,["child-id"])):m("",!0),w.value?(l(),r("div",Le,[s[9]||(s[9]=e("div",{class:"text-2xl md:text-6xl text-center font-bold"},[e("div",{class:"flex justify-center items-center gap-2 md:gap-7"},[e("img",{src:ne,alt:"Trust",class:"h-10 md:h-24 w-10 md:w-24 cursor-pointer"}),h(" Visualizza le "),e("span",{class:"text-[#af4135]"},"ricevute")]),e("div",null,[e("div",{class:"flex justify-center items-center gap-2 md:gap-7"},[e("div",null,[h(" dei "),e("span",{class:"text-[#bf09bd]"},"tuoi "),e("span",{class:"text-[#a688f9]"},"ordini ")])])])],-1)),e("div",ze,[k(K,{to:"/orders/receipts",class:"!text-black opacity-60"},{default:U(()=>s[8]||(s[8]=[h("Fai clic qui.")])),_:1})])])):m("",!0),k(O)])]}),_:1})]),_:1})}}});export{He as default};
