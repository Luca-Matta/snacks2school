import{C as x,D as A,e as w,E,F as R,G as O}from"./zBMnQkMZ.js";const r=new Map;let g,m,p,f;function D(a){const o=x().path,n=O(),{currentRoute:i}=A(),l=A();let d=!1,c=a;const h={dispose(){const e=[...r.get(o)],t=e.findIndex(u=>u[0]===c);if(t===-1)return;const s=e[t][1];s==null||s.dispose(),e.splice(t,1),r.set(o,e)},patch(e){const t=[...r.get(o)],s=t.findIndex(I=>I[0]===c);if(s===-1)return;const[,u]=t[s];c=e,u==null||u.patch(c),t.splice(s,1,[c,u]),r.set(o,t)}};if(r.has(o)){const e=n==null?void 0:n.push(a),t=r.get(o)||[];r.set(o,[...t,[a,e]])}else{const e=n==null?void 0:n.push(a);r.set(o,[[a,e]])}return w(h.dispose),g||(g=l.beforeEach(()=>{f=i.value.path})),m||(m=l.afterEach(()=>{p=i.value.path})),E(()=>{let e=r.get(f);e&&(e=e.map(([t,s])=>(s==null||s.dispose(),[t,void 0])),r.set(f,e)),d=!0}),R(()=>{if(d){let e=r.get(p);e&&(e=e.map(([t,s])=>{s==null||s.dispose();const u=n==null?void 0:n.push(t);return[t,u]}),r.set(p,e))}}),h}export{D as u};
